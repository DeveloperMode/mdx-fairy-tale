import {
  LiveProvider,
  LiveEditor,
  LiveError,
  LivePreview
} from 'react-live'

import { Head, Notes, Image as MdxImage  } from 'mdx-deck'
import { Appear } from '@mdx-deck/components'
import { Split, Horizontal } from '@mdx-deck/layouts'
import Box from '@mdx-deck/layouts/src/Box'
import Flex from '@mdx-deck/layouts/src/Flex'
import prismTheme from 'prism-react-renderer/themes/github'

import AppearOnly from './components/AppearOnly'
import Code from './components/Code'
import CodeWrapper from './components/CodeWrapper'
import Image from './components/Image'
import Provider from './components/Provider'
import Header from './components/Header'
import JSplit from './components/Split'
import JHorizontal from './components/Horizontal'

import Castle from './components/Castle'
import KingMarkdown from './components/KingMarkdown'
import PrincessJavaScript from './components/PrincessJavaScript'

import fairyTale from './themes/fairy-tale'
import * as snippets from './snippets/index'

export const theme = {
  Provider,
  ...fairyTale,
  components: {
    img: Image
  },
  metadata: {
    author: `Josh Dzielak`,
    twitter: `@dzello`,
    event_twitter: `@jamstackconf`,
    event_twitter_link: `https://twitter.com/jamstackconf`,
    date: `July 9, 2019`,
    repository: `https://github.com/developermode/mdx-fairy-tale`
  },
}

<Head>
  <title>MDX: content for kings and princesses</title>
  <meta name='twitter:card' content='summary_large_image' />
  <meta name='twitter:site' content='@dzello' />
  <meta name='twitter:title' content='MDX: content for kings and princesses' />
  <meta name='twitter:description' content='' />
  <meta name='twitter:image' content='https://mdx-fairy-tale.developermode.com/images/mdx-fairy-tale-title-slide.png' />
  <meta property="og:title" content='MDX: content for kings and princesses' />
  <meta property="og:type" content="website" />
  <meta property="og:url" content='https://mdx-fairy-tale.developermode.com/' />
  <meta property="og:image" content='https://mdx-fairy-tale.developermode.com/images/mdx-fairy-tale-title-slide.png' />
  <meta property="og:description" content='' />
  <link rel='shortcut icon' type='image/png' href='/images/favicon.ico'/>
</Head>

# üëë üë∏

# MDX: content for kings and princesses

---

<JHorizontal>
<div>
<h1>&lt;Josh &gt;</h1>
</div>

<AppearOnly>
<Image src="/images/josh-dzielak-crown.png" css={{ width: '30vw' }} />
<Image src="/images/algolia-logo.png" />
<Image src="/images/developermode-logo-2.png" />
</AppearOnly>

<div>
<h1>&lt;/Josh &gt;</h1>
</div>

</JHorizontal>

<Notes>
Hi I‚Äôm Josh, a developer advocate formerly at Algolia and now the co-founder of DeveloperMode, where we do developer-relations-as-a-service and get to play with lots of cool tech. Like MDX, which is what I want to talk to you about tonight.

todo - transitions
</Notes>

---

<img src="/images/mdx-logo.svg" css={{ width: "50vw" }}/>

## MDX = Markdown + JSX

<Notes>
MDX lets you put JSX components in your markdown documents, making the power of your whole JavaScript app accessible from your content.
</Notes>

---

<img src="/images/awesome-stacks-gatsby-screenshot.png" style={{ height: "45vw", border: "1px solid #cacaca" }} />

<Notes>
I first used MDX when building an open source project Awesome Stacks. Awesome Stacks is like an awesome list for stacks on steroids, because an entire Gatsby site is built from the README content. Each awesome stack gets its own page that shows information about each tool in the stack pulled from the GitHub and StackShare GraphQL APIs. I used MDX to allow these GitHub and StackShare tool cards to be shown inline with the content, like you see here for Gatsby, Cloud Firestore and Netlify.

To help you learn more about MDX and how it can help JAMstack teams, I want to tell you a story. But since case studies can be kinda boring, and we're at a pub, I'll tell you a fairy tale instead. 

todo: add images for GitHub component, circle components in image
</Notes>

---

# üìú

# Once upon a time...

<Notes>
Once upon a time, there was a king named King Markdown.
</Notes>

---

<KingMarkdown />

## King Markdown

<Appear>
<div>only knows scrolling</div>
<div>great wall of text</div>
</Appear>

<Notes>
King Markdown loved text-heavy, long-form content. Paragraph after paragraph, multiple sentences each.

The only gestures he knows are scrolling and turning pages.

He's so adamant about having his content his way that he tried to build a Great Wall of Text at the kingdom's southern border, but no one thought it was a good idea and he never got the money to do it.

todo - add scrolling and wall images
</Notes>

---

<PrincessJavaScript />

## Princess JavaScript

<Appear>
<div>loves gestures</div>
<div>knows the jamstack</div>
</Appear>

<Notes>
King Markdown has a daughter, Princess JavaScript. Not a normal name but she‚Äôs not a normal princess.

She writes code and she loves to use many different gestures to interact with her content; to tap, pinch, rotate, shake and swipe.

How'd she learn all that, growing up around so much markdown? One night she snuck out of the kingdom and visited other kingdoms where JAMstack developers live, discovering interactive data viz and visual storytelling. Ever since then, she has been tirelessly advocating to bring this kind of content back into her own kingdom.

todo - add gestures gif and jamstack devs
</Notes>

---

<JHorizontal width='70vw'>
<KingMarkdown src="/images/king-markdown-3.png" />
<h1>‚öîÔ∏è</h1>
<PrincessJavaScript src="/images/princess-javascript-3-left.png" />
</JHorizontal>

<Notes>
So as you can imagine, there's been a lot of tension in the royal palace, similar to what some of you may have even seen in your content teams. The kingdom's content experts, known as the Royal Academy of Content, were struggling to please both king and princess, and they were losing traffic to other kingdoms.
</Notes>

---

# üìØ

# Royal Academy of Content

<Flex>
<Box width={1/3}>
Markdown can't handle events!
</Box>
<Box width={1/3}>
Content authors don't know JavaScript!
</Box>
</Flex>

<Notes>
The academy's markdown authors wanted to make their content more interactive, but they didn't know how. "There's no way to handle events in markdown", they cried! The front-end engineers wanted to help, but they thought it would be too dangerous to let the markdown authors put arbitrary JavaScript code in their documents.
</Notes>

---

# Then one day...

<img src="/images/zeit-mdx-tweet.png" css={{ width: '30vw' }} />

<Notes>
One day, one of the engineers at the Royal Academy of Content was browsing Twitter and saw a tweet about something called MDX. He read the blog post behind the tweet and knew he thought "wow, this could be the perfect solution"

The engineer stayed up all night coding and built a prototype of a news article with an interactive timeline, and the rest was history.
</Notes>

---

# üéâ

# The Kingdom Rejoices

maybe a before / after MDX here showing what gestures are supported

<Flex>
<Box width={1/3}>
content you can tap, pinch, rotate, shake, swipe, flip, rotate & more
</Box>
<Box width={1/3}>
GIF or image of new content
</Box>
</Flex>

<Notes>
Both the engineers and the content authors fell in love with MDX and started to make content spiced up with components that everyone could enjoy, no matter their age or screen size. Because traffic was up across the board, even the king was happy.

The new content was really engaging. It took full advantage of the capabilities of people's devices, letting them scroll and tap, pinch, rotate, shake, swipe, flip, rotate, watch gifs and videos, and more.

Don't you just love it when stories have a happy ending?
</Notes>

---

# üíª

# Let's see some code

<Notes>

I bet you're thinking, I want to see some of this MDX. This is a tech conference, I paid good money, I want to see some code. Do y'all want to see some code?

Ok let's do it. (Put on glasses). You can never be too careful when you let someone else see your code.

Thankfully I brought the Royal Sceptre with me today, which is capable of inspecting code at a distance. It is indeed a prop made to inspect props. Let's see if the Royal Sceptre can detect some components on this slide.
</Notes>

---

<KingMarkdown codeSnippet={snippets.jsx1} />

<Notes>
Searching, searching, searching... a ha!

The scepter has found some code after all. All along, King Markdown was just a React component. Like most React components, it accepts props, has event handlers, and renders some DOM, in this case an image. This component is actually embedded here in my slides, for real. The slides are written in MDX using a really great framework called mdx-deck. 

todo: make the code appear over the king, or as a bubble
</Notes>

---

<AppearOnly>
<JHorizontal width="80vw">
  <div>
    <KingMarkdown height="50vh" hoverable={false} />
  </div>
  <div>
    <CodeWrapper>
      <Code>
        {snippets.mdx1}
      </Code>
    </CodeWrapper>
  </div>
</JHorizontal>
<JHorizontal width="80vw">
  <div>
    <KingMarkdown height="75vh" hoverable={false} />
  </div>
  <div>
    <CodeWrapper>
    <Code>
      {snippets.mdx2}
    </Code>
    </CodeWrapper>
  </div>
</JHorizontal>
<JHorizontal width="95vw">
  <div>
    <KingMarkdown height="75vh" src="/images/king-markdown-2.png" hoverable={false} />
  </div>
  <div>
    <CodeWrapper>
    <Code>
      {snippets.mdx3}
    </Code>
    </CodeWrapper>
  </div>
</JHorizontal>
</AppearOnly>

<Notes>
To embed the KingMarkdown component in my slides, I import it and use JSX syntax. The KingMarkdown component exposes some props that make it customizable and reusable, so we can use it in other places of our content. The king accepts a height prop, so we can make kings of different sizes throughout our presentation.

Heck, because the presentation is MDX, we can actually change the values of the props on the fly. I'll click into the MDX definition and we'll change the king's height. (or maybe this with the princess? and probably a separate slide?)

I hope I've made this presentation a little more fun and engaging because we can interact with it.

todo: add the live coding part; up and down could be DOM elements
</Notes>

---

<LiveProvider code={`<KingMarkdown 
  height="50vh"
  src="/images/king-markdown-1.png" />`}
    scope={{ KingMarkdown, PrincessJavaScript }}>
  <JHorizontal width="90vw">
    <LivePreview />
    <CodeWrapper>
      <LiveEditor style={{ fontFamily: 'Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace', fontSize: '22px', lineHeight: "42px", background: 'none', caretColor: '#0a0a0a' }} theme={prismTheme} />
    </CodeWrapper>
  </JHorizontal>
</LiveProvider>

---

<JHorizontal>
  <KingMarkdown hoverable={false} />
  <PrincessJavaScript hoverable={false} src="/images/princess-javascript-1-left.png" />
</JHorizontal>

<Castle>
</Castle>

<Notes>
But let's take it a bit further. Can we compose an entire scene with MDX? Yes. MDX lets us nest and compose our JSX components, just like we're used to.

For example, we can put the princess in a castle.

**click on the princess**
She says something.
**click on the castle**
It says shake the door loose.
**shake the royal sceptre**
Castle explodes, princess is free, and grateful.

todo: build this scene
</Notes>

---

# Reasons to use MDX

- common widgets
- visual storytelling
- design systems
- page building

<Notes>
If I can do this in a presentation, imagine how you can use MDX on your JAMstack site. You can add common widgets like forms and emoji reactions, wrap elements of your design systems, or let authors build entire pages from JSX components. Authors only need to learn a familiar, HTML-like syntax, and never write raw JavaScript.

todo: get the screenshots
</Notes>

---

# Plugin and integrations logos

<Notes>
MDX Plugins exist for Gatsby, Next.js and much more. Try MDX soon and bring peace and awesomeness to your content kingdom.

todo: get the logos
</Notes>

---

# üôè<br/> Thank you!

<Notes>
Thank you.
</Notes>